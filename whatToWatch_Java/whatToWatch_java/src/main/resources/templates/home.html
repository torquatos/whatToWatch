<!DOCTYPE html>
<html lang="en">
	
    <head>
		
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>What to Watch</title>
		
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		
		<style>
			
			@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
			
			body {
				font-family: 'Inter', sans-serif;
				background-color: #f7fafc;
			}
			
			.container-wrapper {
				min-height: 100vh;
			}
			
			.list-move,
			.list-enter-active, 
			.list-leave-active{
				transition: all 0.5s ease;
			}
			.list-enter-from, 
			.list-leave-to{
				opacity: 0;
				transform: translateY(-10px);
			}
			.list-leave-active{
				position: absolute;
			}
			
		</style>
	</head>
	
    <body>
        <div id="app" class="container-wrapper p-4 sm:p-8">
			<header class="text-center mb-8">
				<h1 class="text-gray-500 font-extrabold text-blue-700">What to Watch</h1>
				<p class="text-gray-500 mt-1">Manage the medias that you would like to watch</p>
			</header>
        </div>
        
        <div v-if="loading" class="text-center text-xl text-blue-500 mt-12">Loading Data...</div>
        <div v-else class="max-w-4x1 mx-auto">
			<!-- Add Media Form -->
			<div class="bg-white p-6 rounded-xl shadow-lg mb-8">
				
				<h2 class="text-2x1 font-semibold mb-4 text-gray-800">Add New Media</h2>
				<form @submit.prevent="addMedia" class="grid grid-cols-1 md:grid-cols-3 gap-4">
					
					<input
						v-model="newMedia.title"
						type="text"
						placeholder="Media Title"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.category"
						type="text"
						placeholder="Media Category (movie, anime...)"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.genre"
						type="text"
						placeholder="Media Genre (drama, comedy...)"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.year"
						type="number"
						placeholder="Media Year"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.seasons"
						type="number"
						placeholder="Media Seasons"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.concluded"
						type="checkbox"
						placeholder="Media is concluded"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.whereToWatch"
						type="text"
						placeholder="Platform streaming the media"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<input
						v-model="newMedia.isWatched"
						type="checkbox"
						placeholder="Media was already Watched"
						required
						class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
					
					<button 
						type="submit"
						:disabled="isSubmitting"
						class="bg-blue-600 text-white p-3 rounded-lg font-bold hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
					>
						{{isSubmitting ? 'Adding...' : 'Add Media'}}
					</button>
				</form>
			</div>
			<!-- Filters and counting -->
			
			<div class="flex flex-col sm:flex-row justify-between items-center bg-white p-4 rounded-xl shadow-md mb-6">
				
				<div class="mb-4 sm:mb-0 text-gray-700">
					<span class="font-bold text-blue-600">{{ filteredMedia.length}}</span> Found Items
					(<span class="font-bold text-red-500">{{pendingMedia.lenght}}</span>pending)
				</div>
				
				<div class="flex space-x-2">
					
					<button
						@click="currentFilter = 'pending'"
						:class="{'bg-blue-500 text-white' : currentFilter === 'pending', 'bg-gray-200 text-gray-700' : currentFilter !== 'pending'}"
						class="py-2 px-4 rounded-full text-sm font-semibold transition duration-150 hover:opacity-80"> Pending </button>
				
					<button
						@click="currentFilter = 'watched'"
						:class="{'bg-blue-500 text-white' : currentFilter === 'watched', 'bg-gray-200 text-gray-700' : currentFilter !== 'watched'}"
						class="py-2 px-4 rounded-full text-sm font-semibold transition duration-150 hover:opacity-80"> Watched </button>
				
					<button
						@click="currentFilter = 'all'"
						:class="{'bg-blue-500 text-white' : currentFilter === 'all', 'bg-gray-200 text-gray-700' : currentFilter !== 'all'}"
						class="py-2 px-4 rounded-full text-sm font-semibold transition duration-150 hover:opacity-80"> All </button>
				
				
				</div>
				
			</div>
			
			<!-- Media list -->
			
			<transition-group name="list" tag="url" class="space-y-4">
				<li
					v-for="media in filteredMedia"
					:key="media.id"
					:class="{'border-1-4 border-green-500' : media.isWatched,'border-l-4 border-red-500': !media.isWatched}"
					class="bg-white p-5 rounded-xl shadow-md flex flex-col md:flex-row justify-between items-start md:items-center transition duration-300 hover:shadow-lg">
					
					<!--Media deatial-->
					
					<div class="flex-1 min-w-0 mb-3 md:mb-0 pr-4">
						
						<h3
							:class="{'line-through text-gray-500' : media.isWatched}"
							class="text-lg font-bold truncate text-gray-800">
							
							{{media.title}}
							
						</h3>
						
						<p class="text-sm text-gray-400 mt-0.5">{{media.category}}</p>
						<span
							v-if="media.isWatched && !media.isConcluded"
							class="mt-1 inline-block text-xs font-semibold text-orange-500 bg-orange-100 px-2 py-0.5 rounded-full">
							Concluded
							</span>
						
					</div>
					
					<div></div>
				</li>
			</transition-group>
		</div>
    </body>
</html>